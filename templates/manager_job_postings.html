{% extends 'base.html' %}
{% block content %}
<div class="page-container">

  <div class="dashboard-welcome-banner">
    <div>
      <h2 class="welcome-title">Mijn vacatures</h2>
      <p class="welcome-subtitle">Bewerk drafts / changes requested en dien daarna in voor review.</p>
    </div>
  </div>

  <div class="table-container shadow">
    <table class="candidate-table">
      <thead>
        <tr>
          <th>Titel</th>
          <th>Afdeling</th>
          <th>Locatie</th>
          <th>Type</th>
          <th>Niveau</th>
          <th>Status</th>
          <th>Recruiter feedback</th>
          <th>Actie</th>
        </tr>
      </thead>

      <tbody>
        {% for job in jobs %}
        <tr>
          <td class="font-bold">{{ job.title }}</td>
          <td>{{ job.department }}</td>
          <td>{{ job.location or '—' }}</td>
          <td>{{ job.employment_type or '—' }}</td>
          <td>{{ job.experience_level or '—' }}</td>

          <td>
            <span class="status-pill status-{{ job.status }}">
              {{ status_labels.get(job.status, job.status) }}
            </span>
          </td>

          <td>{{ job.review_comment or "—" }}</td>

          <td>
            <div class="action-group">

              <a href="{{ url_for('job_posting_detail_page', job_id=job.id) }}" class="cancel-button">
                Kijken
              </a>

              <a href="{{ url_for('manager_phase_interviewers_page', job_id=job.id) }}" class="plan-button">
                Interviewers
              </a>

              {% if job.status in ["draft", "changes_requested"] %}
                <a href="{{ url_for('edit_job_posting_page', job_id=job.id) }}" class="plan-button">
                  Aanpassen
                </a>

                <form method="POST" action="{{ url_for('submit_job_posting_for_review_action', job_id=job.id) }}">
                  <button type="submit" class="download-button">Inleveren voor review</button>
                </form>
              {% else %}
                <span class="status-label-small">Geen acties beschikbaar</span>
              {% endif %}

            </div>
          </td>
        </tr>
        {% else %}
        <tr>
          <td colspan="8" class="empty-state">Nog geen vacatures.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="page-actions">
    <a href="{{ url_for('dashboard_page') }}" class="cancel-button">Terug</a>
  </div>

</div>
{% endblock %}
